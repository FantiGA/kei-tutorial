<!DOCTYPE html>
<html>
<head>
    <title>囲碁の死活問題サイト</title>
    <link rel="stylesheet" href="styles1.css">

    <style>

    #board {
        position: relative;
        width: 270px;
        height: 270px;
        background-color: #ccc;
        cursor: pointer;
    }
    .stone {
        position: absolute;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }
    .black {
        background-color: #000;
    }
    .white {
        background-color: #fff;
    }
    .line {
        position: absolute;
        background-color: #000;
    }
    .vertical-line {
        width: 2px;
        height: 100%;
        left: 50%;
        transform: translateX(-50%);
    }
    .horizontal-line {
        width: 100%;
        height: 2px;
        top: 50%;
        transform: translateY(-50%);
    }
  </style>
</head>
<body>
    <header>
      <h1>囲碁の死活問題</h1>
  </header>
  <br>
  <div id="board"></div>
  <script>
    // 囲碁のボードのサイズ（9x9）
    const boardSize = 9;

    // 最初の基盤の状態
    // const initialBoardState = [
    //     [1, 1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1],
    //     [-1, -1, -1, -1, -1, -1, -1, -1, -1]
    // ];

    // ボード上の交差点の座標
    const intersectionPoints = [];
    let boardLeft = 0;
    let boardTop = 0;
    let stone_coor = new Array(boardSize * boardSize).fill(0);
    console.log(stone_coor[0]);

    // 交差点の座標を計算
    for (let i = 0; i < boardSize; i++) {
      for (let j = 0; j < boardSize; j++) {
        const x = (i * 30) + 15;
        const y = (j * 30) + 15;
        intersectionPoints.push({ x, y });
      }
    }

    // 石を置く関数
    function placeStone(event) {
      // クリックしたところの座標をキャッチ
        const x = event.clientX - boardLeft;
        const y = event.clientY - boardTop;
        // console.log(boardLeft, boardTop, x, y);

        // 最も近い交差点を見つける
        let nearestPoint = null;
        let shortestDistance = Infinity;
        let bar_num = null;
        for (let i = 0; i < intersectionPoints.length; i++) {
            const point = intersectionPoints[i];
            const distance = Math.sqrt((point.x - x) ** 2 + (point.y - y) ** 2);
            if (distance < shortestDistance) {
                shortestDistance = distance;
                nearestPoint = point;
                bar_num = i;
            }
        }
        
        console.log(bar_num);
        if (stone_coor[bar_num] !== 0)
            return;
        stone_coor[bar_num] = currentPlayer;


        // 石を置く
        
        const stone = document.createElement("div");
        stone.className = "stone";
        stone.style.left = nearestPoint.x + "px";
        stone.style.top = nearestPoint.y + "px";
        stone.classList.add(currentPlayer === 1 ? "black" : "white");
        document.getElementById("board").appendChild(stone);

        currentPlayer = (currentPlayer === 1) ? 2 : 1; // プレイヤーを交互に切り替える
    }

    // クリックイベントリスナーを追加
    document.getElementById("board").addEventListener("click", placeStone);

    // 黒石か白石かを保持する変数
    let currentPlayer = 1; // 1: 黒石, 2: 白石

    // 交差線を表示する関数
    function drawLines() {
      const board = document.getElementById("board");
      // Get left, top offset of the element
      boardLeft = board.offsetLeft;
      boardTop = board.offsetTop;

      for (let i = 0; i < boardSize; i++) {
        for (let j = 0; j < boardSize; j++) {
          const intersection = document.createElement("div");
          intersection.className = "intersection";
          intersection.style.left = (i * 30) + "px";
          intersection.style.top = (j * 30) + "px";
          board.appendChild(intersection);
        }
      }

      for (let i = 0; i < boardSize; i++) {
        const verticalLine = document.createElement("div");
        verticalLine.className = "line vertical-line";
        verticalLine.style.left = (i * 30 + 15) + "px";
        board.appendChild(verticalLine);

        const horizontalLine = document.createElement("div");
        horizontalLine.className = "line horizontal-line";
        horizontalLine.style.top = (i * 30 + 15) + "px";
        board.appendChild(horizontalLine);
      }
    }

    // 交差線を描画
    drawLines();

    // // 石を取り除く関数
    // function removeSurroundedStones(x, y) {
    //     const color = stones[x][y];
    //     const checked = Array.from({ length: boardSize }, () => Array(boardSize).fill(false));

    //     // 内部関数: 囲まれた石を再帰的に取り除く
    //     function removeSurrounded(x, y) {
    //         if (x < 0 || x >= boardSize || y < 0 || y >= boardSize || checked[x][y]) {
    //             return;
    //         }

    //         checked[x][y] = true;

    //         if (stones[x][y] === -1) {
    //             return; // 空いている場所は囲まれていない
    //         }

    //         if (stones[x][y] !== color) {
    //             return; // 自分の石でない場合は囲まれていない
    //         }

    //         // 上下左右をチェック
    //         removeSurrounded(x - 1, y);
    //         removeSurrounded(x + 1, y);
    //         removeSurrounded(x, y - 1);
    //         removeSurrounded(x, y + 1);
    //     }

    //     // 指定した石の周囲の石を取り除く
    //     removeSurrounded(x, y);

    //     // 取り除かれる石を-1でマークする
    //     for (let i = 0; i < boardSize; i++) {
    //         for (let j = 0; j < boardSize; j++) {
    //             if (checked[i][j]) {
    //                 stones[i][j] = -1;
    //             }
    //         }
    //     }
    // }
  </script>
  <button class="btn" onclick="location.href='file:///Users/yueyue/Desktop/死活問題/simpleQ1.html'" >NEXT</button>
  <br>
  <br>
<footer>
  <p>&copy; 2023 囲碁の死活問題サイト. All rights reserved.</p>
</footer>
</body>
</html>
